# 9. 编码标准和约定

### 9.1 现有标准合规性

**代码风格**: 遵循PEP 8规范，使用snake_case命名，4空格缩进
**代码检查**: 使用ruff进行代码检查，black进行代码格式化，isort进行导入排序
**测试模式**: 使用pytest框架，单元测试覆盖率目标>80%
**文档风格**: 使用Google风格的docstring，中文注释，Markdown文档

### 9.2 增强特定标准

#### 9.2.1 Python后端标准
- **类型注解**: 所有函数必须包含完整的类型注解
- **文档字符串**: 使用Google风格，包含参数、返回值和异常说明
- **错误处理**: 使用自定义异常类，统一的错误响应格式
- **日志记录**: 使用结构化日志，包含请求ID和用户信息

#### 9.2.2 TypeScript前端标准
- **组件命名**: 使用PascalCase，文件名使用kebab-case
- **类型定义**: 为所有API响应和组件props定义TypeScript接口
- **状态管理**: 使用React Hooks，避免类组件
- **样式管理**: 使用CSS Modules或styled-components

#### 9.2.3 数据库标准
- **表命名**: 使用snake_case，复数形式
- **字段命名**: 使用snake_case，包含大写字母的字段用双引号包围
- **函数命名**: 所有函数添加user_前缀
- **迁移脚本**: 包含向前和向后兼容的迁移

### 9.3 关键集成规则

- **现有API兼容性**: 新API必须保持与现有API的响应格式一致
- **数据库集成**: 新表使用独立的命名空间，避免与现有表冲突
- **错误处理**: 使用统一的错误处理中间件，保持错误响应格式一致
- **日志一致性**: 使用相同的日志格式和级别，便于日志聚合和分析
