# 7. 源码树集成

### 7.1 新文件组织

```
pm_agent/
├── backend/
│   ├── plugins/
│   │   └── pm_agent/              # 现有插件（扩展）
│   │       ├── core/              # 现有核心逻辑
│   │       │   ├── agent.py       # 现有文件
│   │       │   ├── task_manager.py # 现有文件
│   │       │   ├── milestone_manager.py # 新增：里程碑管理
│   │       │   ├── risk_assessment.py # 新增：风险评估
│   │       │   └── enhanced_notification.py # 新增：增强通知
│   │       ├── tools/             # 现有工具函数（扩展）
│   │       │   ├── task_tools.py  # 现有文件
│   │       │   ├── milestone_tools.py # 新增：里程碑工具
│   │       │   ├── risk_tools.py  # 新增：风险工具
│   │       │   └── notification_tools.py # 新增：通知工具
│   │       ├── models/            # 现有数据模型（扩展）
│   │       │   ├── task.py        # 现有文件
│   │       │   ├── milestone.py   # 新增：里程碑模型
│   │       │   ├── risk.py        # 新增：风险模型
│   │       │   └── notification.py # 新增：通知模型
│   │       └── tests/             # 现有测试（扩展）
│   │           ├── test_agent.py  # 现有文件
│   │           ├── test_milestones.py # 新增：里程碑测试
│   │           ├── test_risks.py  # 新增：风险测试
│   │           └── test_notifications.py # 新增：通知测试
│   ├── database/                  # 现有数据库（扩展）
│   │   ├── migrations/            # 现有迁移
│   │   │   ├── 001_initial_schema.sql # 现有文件
│   │   │   ├── 004_add_milestones.sql # 新增：里程碑表
│   │   │   ├── 005_add_risks.sql  # 新增：风险表
│   │   │   └── 006_add_notifications.sql # 新增：通知表
│   │   └── seeds/                 # 现有种子数据
│   │       ├── initial_data.sql   # 现有文件
│   │       └── milestone_risks_data.sql # 新增：示例数据
│   └── services/                  # 现有服务（扩展）
│       ├── task_service.py        # 现有文件
│       ├── milestone_service.py   # 新增：里程碑服务
│       ├── risk_service.py        # 新增：风险服务
│       └── enhanced_notification_service.py # 新增：增强通知服务
├── frontend/                      # 现有前端（扩展）
│   └── src/
│       ├── components/            # 现有组件（扩展）
│       │   ├── task/              # 现有任务组件
│       │   ├── milestone/         # 新增：里程碑组件
│       │   │   ├── MilestoneList.tsx
│       │   │   ├── MilestoneForm.tsx
│       │   │   └── MilestoneCard.tsx
│       │   ├── risk/              # 新增：风险组件
│       │   │   ├── RiskDashboard.tsx
│       │   │   ├── RiskForm.tsx
│       │   │   └── RiskCard.tsx
│       │   └── notification/      # 新增：通知组件
│       │       ├── NotificationCenter.tsx
│       │       └── NotificationSettings.tsx
│       ├── pages/                 # 现有页面（扩展）
│       │   ├── Dashboard.tsx      # 现有文件
│       │   ├── Milestones.tsx     # 新增：里程碑页面
│       │   ├── Risks.tsx          # 新增：风险页面
│       │   └── Notifications.tsx  # 新增：通知页面
│       └── services/              # 现有服务（扩展）
│           ├── api.ts             # 现有文件
│           ├── milestoneApi.ts    # 新增：里程碑API
│           ├── riskApi.ts         # 新增：风险API
│           └── notificationApi.ts # 新增：通知API
└── tests/                         # 现有测试（扩展）
    ├── unit/                      # 现有单元测试
    ├── integration/               # 现有集成测试
    │   ├── test_milestone_integration.py # 新增：里程碑集成测试
    │   └── test_risk_integration.py # 新增：风险集成测试
    └── e2e/                       # 现有端到端测试
        └── test_milestone_risk_flows.py # 新增：端到端测试
```

### 7.2 集成指南

- **文件命名**: 遵循现有snake_case（Python）和PascalCase（TypeScript）约定
- **文件夹组织**: 按功能模块组织，保持与现有结构的一致性
- **导入/导出模式**: 使用相对导入，保持模块间的清晰依赖关系
