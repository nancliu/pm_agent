# Story 2.1: 任务创建功能

## Status
Draft

## Story
**As a** 项目成员，
**I want** 能够创建新任务，
**so that** 能够记录和管理需要完成的工作。

## Acceptance Criteria

1. 用户能够输入任务标题、描述、负责人、截止日期、优先级
2. 系统验证必填字段，确保任务信息完整
3. 任务创建成功后显示确认信息
4. 新任务自动保存到数据库
5. 任务创建后能够立即在任务列表中看到

## Tasks / Subtasks

- [ ] 任务创建表单 (AC: 1, 2)
  - [ ] 创建任务创建页面
  - [ ] 实现表单字段验证
  - [ ] 实现日期选择器组件
  - [ ] 实现优先级选择组件
  - [ ] 实现负责人选择组件
- [ ] 任务创建API (AC: 3, 4)
  - [ ] 创建任务创建API端点
  - [ ] 实现数据验证逻辑
  - [ ] 实现数据库保存操作
  - [ ] 实现错误处理机制
- [ ] 前端集成 (AC: 5)
  - [ ] 实现表单提交逻辑
  - [ ] 实现成功反馈显示
  - [ ] 实现任务列表实时更新
  - [ ] 实现错误提示显示

## Dev Notes

### 任务字段定义
- **标题**: 必填，最大长度100字符
- **描述**: 可选，最大长度500字符
- **负责人**: 必填，从用户列表选择
- **截止日期**: 必填，不能早于当前日期
- **优先级**: 必填，选项：高/中/低
- **状态**: 默认"未开始"

### 数据库表设计
- **tasks表**: id, title, description, assignee_id, due_date, priority, status, created_by, created_at, updated_at

### API端点
- `POST /api/tasks` - 创建新任务
- `GET /api/tasks` - 获取任务列表
- `GET /api/users` - 获取用户列表（用于负责人选择）

### 表单验证规则
- 标题不能为空且长度不超过100字符
- 截止日期不能早于当前日期
- 负责人必须从现有用户中选择
- 优先级必须从预定义选项中选择

### Testing
- **测试文件位置**: `tests/unit/tasks/`, `tests/integration/tasks/`
- **测试标准**: 表单验证测试、API功能测试
- **测试框架**: pytest + pytest-asyncio
- **测试要求**: 字段验证测试、数据库操作测试、前端交互测试

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-01-15 | 1.0 | 初始故事创建 | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
待开发时填写

### Debug Log References
待开发时填写

### Completion Notes List
待开发时填写

### File List
待开发时填写

## QA Results
待QA审查时填写
