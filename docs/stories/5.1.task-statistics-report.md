# Story 5.1: 任务统计报告

## Status
Draft

## Story
**As a** 项目经理，
**I want** 能够查看任务完成统计，
**so that** 能够了解项目整体进展。

## Acceptance Criteria

1. 系统显示任务完成率统计
2. 系统显示延期任务数量和比例
3. 系统显示按负责人分组的任务统计
4. 系统显示按优先级分组的任务统计
5. 统计数据实时更新，反映最新状态

## Tasks / Subtasks

- [ ] 统计计算逻辑 (AC: 1, 2, 3, 4)
  - [ ] 实现任务完成率计算
  - [ ] 实现延期任务统计
  - [ ] 实现按负责人分组统计
  - [ ] 实现按优先级分组统计
- [ ] 统计页面组件 (AC: 1, 2, 3, 4)
  - [ ] 创建统计仪表板页面
  - [ ] 实现完成率图表组件
  - [ ] 实现延期任务图表组件
  - [ ] 实现分组统计表格组件
- [ ] 实时更新功能 (AC: 5)
  - [ ] 实现统计数据缓存
  - [ ] 实现数据自动刷新
  - [ ] 实现更新状态指示
  - [ ] 实现数据刷新控制
- [ ] 统计API接口 (AC: 1, 2, 3, 4, 5)
  - [ ] 创建统计计算API
  - [ ] 实现数据聚合查询
  - [ ] 实现缓存机制
  - [ ] 实现性能优化

## Dev Notes

### 统计指标定义
- **完成率**: 已完成任务数 / 总任务数 × 100%
- **延期率**: 延期任务数 / 总任务数 × 100%
- **按负责人统计**: 每个负责人的任务数量、完成数量、延期数量
- **按优先级统计**: 每个优先级的任务数量、完成数量、延期数量

### 图表类型
- **完成率**: 环形进度条
- **延期率**: 柱状图
- **负责人统计**: 横向柱状图
- **优先级统计**: 饼图

### 数据更新频率
- **实时更新**: 任务状态变更时
- **定时更新**: 每5分钟刷新一次
- **手动刷新**: 用户点击刷新按钮
- **缓存时间**: 5分钟

### 数据库查询优化
- 使用聚合查询减少数据库负载
- 实现查询结果缓存
- 使用索引优化查询性能
- 实现分页查询大数据集

### API端点
- `GET /api/statistics/overview` - 获取统计概览
- `GET /api/statistics/by-assignee` - 按负责人统计
- `GET /api/statistics/by-priority` - 按优先级统计
- `GET /api/statistics/refresh` - 刷新统计数据

### 权限控制
- 项目经理可以查看所有统计
- 成员只能查看自己的任务统计
- 统计数据不包含敏感信息

### Testing
- **测试文件位置**: `tests/unit/statistics/`, `tests/integration/statistics/`
- **测试标准**: 统计计算测试、性能测试
- **测试框架**: pytest + pytest-asyncio
- **测试要求**: 数据准确性测试、缓存测试、权限测试

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-01-15 | 1.0 | 初始故事创建 | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
待开发时填写

### Debug Log References
待开发时填写

### Completion Notes List
待开发时填写

### File List
待开发时填写

## QA Results
待QA审查时填写
